[
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html",
    "href": "chapters/02-1-Intro_to_analysis_software.html",
    "title": "Introduction to R",
    "section": "",
    "text": "This short course aims to take you through the process of writing your first programs in the R statistical programming language to analyse national and international educational datasets. To do this we will be using the R Studio integrated development environment (IDE), a desktop application to support you in writing R scripts. R Studio supports your programming by flagging up errors in your code as you write it, and helping you manage your analysis environment by giving you quick access to tables, objects and graphs as you develop them. In addition, we will be looking at data analysis using the tidyverse code packages. The tidyverse is a standardised collection of supporting code that helps you read data, tidy it into a usable format, analyse it and present your findings.\nThe R programming language offers similar functionality to an application based statistical tool such as SPSS, with more of a focus on you writing code to solve your problems, rather than using prebuilt tools. R is open source, meaning that it is free to use and that lots of people have written code in R that they have shared with others. R statistical libraries are some of the most comprehensive in existence. R is popular1 in academia and industry, being used for everything from sales modelling to cancer detection.\n# This example shows how R can pull data directly from the internet\n# tidy it and start making graphs. All within 9 lines of code\nlibrary(tidyverse)\n\neducation &lt;- read_csv(\n  \"https://barrolee.github.io/BarroLeeDataSet/BLData/BL_v3_MF.csv\")\n\neducation %&gt;%\n  filter(agefrom == 15, ageto == 24,\n         country %in% c(\"Germany\",\"France\",\"Italy\",\"United Kingdom\")) %&gt;%\n  ggplot(aes(x=year, y=yr_sch, colour=country)) +\n  geom_point() +\n  geom_line()\nWhilst it is possible to use R through menu systems and drop down tools, the focus of this course is for you to write your own R scripts. These are text files that will tell the computer how to go through the process of loading, cleaning, analysing and presenting data. The sequential and modular nature of these files makes it very easy to develop and test each stage separately, reuse code in the future, and share with others.\nThis booklet is written with the following sections to support you:\n# Code examples and questions appear like this\na &lt;- 1 + 3\nCourier font indicates keyboard presses, column names, column values and function names.\n&lt;folder&gt; Courier font within brackets describe values that can be passed to functions and that you need to define yourself. I.e. copying and pasting these code chunks verbatim won’t work!",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#sec-installation",
    "href": "chapters/02-1-Intro_to_analysis_software.html#sec-installation",
    "title": "Introduction to R",
    "section": "\n1.1 Installation (on your own machine)",
    "text": "1.1 Installation (on your own machine)\n\n\nInstall R (default settings should be fine)\n\n\nWindows users visit: here\n\n\nMac users visit: here and make sure you get the correct version of R for M1/2 Macs (~November 2020 onwards), or Intel Macs (~up to November 2020)\n\n\nInstall RStudio, visit here and it should present you with the version suitable for your operating system.\n\n(If the above doesn’t work follow the instructions here)",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#sec-packages",
    "href": "chapters/02-1-Intro_to_analysis_software.html#sec-packages",
    "title": "Introduction to R",
    "section": "\n1.2 Setting up RStudio and the tidyverse",
    "text": "1.2 Setting up RStudio and the tidyverse\n\nOpen RStudio\n\nOn the bottom right-hand side, select Packages, then select Install, then type “tidyverse” into the Packages field of the new window:\n\n\nClick Install and you should see things happening in the console (bottom left). Wait for the console activity to finish (it’ll be downloading and checking packages). If it asks any questions, type N for no and press enter.\n\nAdd a new R Script using the  button\n\n\n\nIn the new R script, write the following:\n\n\n\nSelect all the lines and press Control or Command ⌘ and Enter on your keyboard at the same time. Alternatively, press the  button\n\n\n\nCheck that you have the following in the console window (depending on your screen size you might have fewer columns):\n\n\nInstall the arrow package, repeat step 2, above.\nDownload the PISA_student_2022_subset.parquet dataset from here and download it on your computer, make a note of the full folder location where you have saved this!\n\n\n\n\n\n\n\nNote\n\n\n\nIf you need help with finding the full folder location of your file, often a hurdle for Mac users, go to ?@sec-loading-computer\n\n\n\nCopy the following code and replace &lt;folder&gt; with the full folder location of where your dataset was saved, make sure that you have .parquet on the end. And keep the (r\"[  ]\")!\n\n\nexamples of what this should look like for PC and Mac# For Pete (PC) the address format was:\nPISA_2022 &lt;- read_parquet(r\"[C:\\Users\\Peter\\KCL\\MASTEMR\\PISA_student_2022_subset.parquet]\")\n\n# For Richard (Mac) the address format was:\nPISA_2022 &lt;- read_parquet(r\"[/Users/k1765032/Documents/Teaching/STEM MA/Quantitative module/Data sets/PISA_student_2022_subset.parquet]\")\n\n\n\nlibrary(arrow)\nlibrary(tidyverse)\n\nPISA_2022 &lt;- read_parquet(r\"[&lt;folder&gt;PISA_student_2022_subset.parquet]\")\n\n\nUnderneath the code you have already written, copy the code below (you don’t have to write it yourself), and run it. Try and figure out what each line does and what it’s telling you.\n\n\nlibrary(tidyverse)\n\nPISA_2022 %&gt;%\n  mutate(maths_better = PV1MATH &gt; PV1READ) %&gt;%\n  select(CNT, ST004D01T, maths_better, PV1MATH, PV1READ) %&gt;% \n  filter(!is.na(ST004D01T), !is.na(maths_better)) %&gt;%\n  group_by(ST004D01T) %&gt;%\n  mutate(students_n = n()) %&gt;%\n  group_by(ST004D01T, maths_better) %&gt;%\n  summarise(n = n(),\n            per = n/unique(students_n))\n\n\nThat’s it, you should be set up!\nAny issues, please drop a message on the Teams group, or mail peter.kemp@kcl.ac.uk and richard.brock@kcl.ac.uk",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#objects-and-instructions",
    "href": "chapters/02-1-Intro_to_analysis_software.html#objects-and-instructions",
    "title": "Introduction to R",
    "section": "\n3.1 Objects and instructions",
    "text": "3.1 Objects and instructions\nIn programming languages we can attach data to a name, this is called assigning a value to an object (you might also call them variables). To do this in R we use the &lt;- arrow command. For example, I want to put the word \"Pete\" into an object called myname (note that words and sentences such as \"Pete\" need speech marks):\n\nmyname &lt;- \"Pete\"\nprint(myname)\n\n[1] \"Pete\"\n\n\nWe can also perform quick calculations and assign them to objects:\n\nHoursInYear &lt;- 365 * 24\nprint(HoursInYear) \n\n[1] 8760\n\n\n\nType the two examples above into your RStudio script file and check that they work. Adapt them to say your full name and give the number of MinutesInADay\n\n\n\n\n\n\n\nTip\n\n\n\nRemember to select code and press control or command and Enter to run it\n\n\nObjects can form part of calculations, for example, the code below shows how we can use the number HoursInYear to (roughly!) calculate the number of HoursInWeek:\n\nHoursInYear &lt;- 365 * 24\n\nHoursInWeek &lt;- HoursInYear / 52\nprint(HoursInWeek)\n\n[1] 168.4615\n\n\nNotice from the above we can perform the main arithmetic commands using keyboard symbols: + (add); - (minus); * (multiply); / (divide); ^ (power)\nObjects can change values when you run code. For example in the code below:\n\na &lt;- 2000\nb &lt;- 5\n\na &lt;- b\n\na &lt;- a * b\nprint(a)\n\n[1] 25\n\n\nWhat’s going on here?\n\nline 1 sets a to equal 2000 (note: don’t use commas in writing numbers a &lt;- 2,000 would bring up an error),\nline 2 sets b to equal 5,\nline 4 overwrites the value of a with the value stored in b, making object a now equal to 5\nline six is now 5 * 5\n\n\n\n3.1.1 Questions\n\nwhat are the outputs of the following code snippets/what do they do? One of the examples might not output anything, why is that? Type the code into your script file to check your answers:\ncode example 1\n\nrabbits &lt;- 50\nfeet &lt;- 4\n\ntotalfeet &lt;- rabbits * feet\nprint(totalfeet)\n\n\nanswer200\n\n\ncode example 2\n\np &lt;- 3.14 - 0.14\nr &lt;- 5\n\nprint(p * r^2)\n\n\nanswer75\n\n\ncode example 3\n\ntax &lt;- 17.5\nprice &lt;- 4.50\nsales &lt;- 128\ntax &lt;- 20\n\nincome &lt;- (sales * price) * (1 + (tax/100))\n\n\nanswer# prints nothing! there isn't a print statement",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#naming-objects",
    "href": "chapters/02-1-Intro_to_analysis_software.html#naming-objects",
    "title": "Introduction to R",
    "section": "\n3.2 Naming objects",
    "text": "3.2 Naming objects\nCorrectly naming objects is very important. You can give an object almost any name, but there are a few rules to follow:\n\nName them something sensible\nR is case sensitive, myName is not equal to (!=) myname\n\nDon’t use spaces in names\nDon’t start a name with a number\nKeep punctuation in object names to underscore (_ and full stop .) e.g. my_name, my.name.\nStick to a convention for all your objects, it’ll make your code easier to read, e.g.\n\n\nmyName, yourName, ourName (this is camelCase 2)\n\nmy_name, your_name, our_name (this is snake case)\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nThe actual name of an object has no effect on what it does (other than invalid names breaking your program!). For example age &lt;- \"Barry\" is perfectly valid to R, it’s just a real pain for a human to read.\n\n\n\n3.2.1 Questions\n\nWhich of these are valid R object names:\n\nmy_Number\nmy-Number\nmyNumber!\nfirst name\nFIRSTname\ni\n3names\nnames3\n\n\nanswers# my_Number  (VALID)\n# my-Number  (INVALID due to -)\n# myNumber!  (INVALID due to !)\n# first name (INVALID due to space)\n# FIRSTname  (VALID but don't recommend so many caps)\n# i          (VALID)\n# 3names     (INVALID starts with a 3)\n# names3     (VALID)\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFor more information on the R programming style guide, see this",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#comments",
    "href": "chapters/02-1-Intro_to_analysis_software.html#comments",
    "title": "Introduction to R",
    "section": "\n3.3 Comments",
    "text": "3.3 Comments\nCode can often look confusing and it’s a good idea to add # comments to your code to make it more understandable for you and others. The computer ignores comments when running your code:\n\n# this calculates the average sales per shop\n\nincome1 &lt;- 132\nincome2 &lt;- 665\nincome3 &lt;- 233\nincome4 &lt;- 1200\n\nshops &lt;- 4 # everything after the hash is a comment\n\navgSales &lt;- sum(income1, income2, income3, income4) / shops  \n\n# sometimes you might want to comment out code that\n# is no longer needed, but might be useful later\n# standard_deviation &lt;- sd(c(income1, income2, income3, income4) )\n# the above code isn't run\n\nprint(avgSales) # but this code is\n\n[1] 557.5",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#sec-datatypes",
    "href": "chapters/02-1-Intro_to_analysis_software.html#sec-datatypes",
    "title": "Introduction to R",
    "section": "\n3.4 Datatypes",
    "text": "3.4 Datatypes\nWe have already met two different datatypes, the character datatype for words and letters (e.g. \"Peter\") and the numeric datatype for numbers (e.g. 12). Datatypes tell R how to handle data in certain circumstances. Sometimes data will be of the wrong datatype and you will need to convert between datatypes.\n\nweeks &lt;- 4\ndays_in_week &lt;- \"7\"\n\n# we now attempt to multiply a number by a string\n# but it doesn't work!\ntotal_days &lt;- weeks * days_in_week \n\nError in weeks * days_in_week: non-numeric argument to binary operator\n\n\nWhilst R will understand what to do when we multiply numbers with numbers, it gets very confused and raises an error when we try to perform an arithmetic operation using words and numbers.\nTo perform the calculation we will need to convert the days_in_week from a string to a number, using the as.numeric(&lt;text&gt;) command:\n\nweeks &lt;- 4\ndays_in_week &lt;- \"7\"\n\n# we now attempt to multiply a number by a string\ntotal_days &lt;- weeks * as.numeric(days_in_week)\n\nThere is a logical datatype for boolean values of TRUE and FALSE. This will become a lot more useful later.\n\nlegs_snake &lt;- FALSE # you can specify logical values directly\ndogs_legs &lt;- 4\nlegs_dog &lt;- dogs_legs &gt; 0 # or as part of a calculation\n\n# Do dog's have legs?\nprint(legs_dog)\n\n[1] TRUE\n\n\nThere are actually three datatypes for numbers in R, numeric for most of your work, the rarer integer specifically for whole numbers and the even rarer complex for complex numbers. When you are looking at categorical data, factors are used on top of the underlying datatype to store the different values, for example you might have a field of character to store countries, factors would then list the different countries stored in this character field.\nTo change from one datatype to another we use the as.____ command: as.numeric(&lt;text&gt;), as.logical(&lt;data&gt;), as.character(&lt;numeric&gt;).\n\n3.4.1 Questions\n\n\nCan you spot the error(s) in this code and fix them so it outputs: “July is month 7”?\n\n\nmonth &lt;- \"July\"\norder &lt;- 7\n  \nprint(month)\nPrint(\"is\")\nprint(month)\nprint(\"order\")\n\n\nanswermonth &lt;- \"July\"\norder &lt;- 7\n  \nprint(month)    \nprint(\"is\")     #1 print needs a lowercase p\nprint(\"month\")  #2 month is a character not an object, use speech marks\nprint(order)    #3 order is an object, not a character, so drop the speech marks\n\n\n\nCan you spot the error(s) in this code and fix it?\n\n\na &lt;- 7\nb &lt;- \"8\"\nc &lt; - 3\n  \nprint(a + b + c)\n\n\nanswera &lt;- 7\nb &lt;- 8 #1 b is numeric so drop the speech marks\nc &lt;- 3 #2 the arrow needs to be together, remove the space\n  \nprint(a + b + c)\n\n\n\nCan you spot the error(s) in this code and fix it?\n\n\npass mark &lt;- 50 \nexam_grade &lt;- 50\n\n# did the student pass?\nprint(exam_grade &gt; pass_mark)\n\n\nanswerpass_mark &lt;- 50 #1 the variable name can't have any spaces\nexam_grade &lt;- 50\n\n# did the student pass?\nprint(exam_grade &gt;= pass_mark) # this needs to be &gt;= as they had a passing grade\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nIf you want to find out the datatype of an object you can use the structure str command to give you more information about the object. In this instance chr means that month is of character datatype and num means it is of the numeric datatype.\n\nmonth &lt;- \"July\"\nstr(month)\n\n chr \"July\"\n\nmonth &lt;- 7\nstr(month)\n\n num 7",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#questions-3",
    "href": "chapters/02-1-Intro_to_analysis_software.html#questions-3",
    "title": "Introduction to R",
    "section": "\n4.1 Questions",
    "text": "4.1 Questions\n\n\nCan you spot the three problems with this code:\n\n\nnums &lt;- v(1,2,\"3\",4,7,2,2)\nsum(nums)\nmean(nums)\n# return a vector of all numbers greater than 2\nnums(nums &gt;= 2)\n\n\nanswernums &lt;- c(1,2,3,4,7,2,2) \n#1 a vector is declared using c(), not v()\n#2 3 should be numeric, so no need for speech marks\n# (though technically R would do this conversion for you!)\n\nsum(nums)\nmean(nums)\n# return a vector of all numbers greater than 2\nnums[nums &gt;= 2] #3 to pick items from another vector, use square brackets\n\n\n\nCreate a vector to store the number of glasses of water you have drunk for each day in the last 7 days. Work out:\n\nthe mean average number of glasses for the week,\nthe total number of glasses,\nthe number of days where you drank less than 2 glasses (feel free to replace water with your own tipple: wine, coffee, tea, coke, etc.)\n\n\n\n\nanswerglasses &lt;- c(6,1,3,2,3,0,3)\nmean(glasses)\nsum(glasses)\nsum(glasses &lt; 2)\n\n\n\nUsing the vectors below, create a program that will find out the average grade for females taking English:\n\n\nenglish_grade &lt;- c(8,5,3,2,3,6,9)\ngenders &lt;- c(\"F\", \"M\", \"M\", \"F\", \"M\", \"F\", \"M\")\n\n\nanswerenglish_grade &lt;- c(8,5,3,2,3,6,9)\ngenders &lt;- c(\"F\", \"M\", \"M\", \"F\", \"M\", \"F\", \"M\")\nmean(english_grade[genders == \"F\"])",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#sec-load-run-pckges",
    "href": "chapters/02-1-Intro_to_analysis_software.html#sec-load-run-pckges",
    "title": "Introduction to R",
    "section": "\n6.1 Installing and loading packages",
    "text": "6.1 Installing and loading packages\nTo install a package you can use the package tab in the bottom right-hand panel of RStudio and follow the steps from Section 1.2. Alternatively you can install things by typing:\n\ninstall.packages(\"tidyverse\")\n\nNote that the instruction is to install packages, you can pass a vector of package names to install multiple packages at the same time:\n\ninstall.packages(c(\"tidyverse\",\"readxl\",\"haven\"))\n\nOnce a package is installed it doesn’t mean that you can use it, yet. You will need to load the package. To do this you need to use the library(&lt;package_name&gt;) command, for example:\n\nlibrary(tidyverse)\n\n\n\n\n\n\n\nImportant\n\n\n\nSome packages might use the same function names as other packages, for example select might do different things depending on which package you loaded last. As a rule of thumb, when you start RStudio afresh, make sure that you load the tidyverse package after you have loaded all your other packages. To read more about this problem see ?@sec-QANDA",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  },
  {
    "objectID": "chapters/02-1-Intro_to_analysis_software.html#footnotes",
    "href": "chapters/02-1-Intro_to_analysis_software.html#footnotes",
    "title": "Introduction to R",
    "section": "Footnotes",
    "text": "Footnotes\n\nAs of December 2022, Tiobe has R as the 11th most popular programming language. Many other, contradictory, ranking systems exist.↩︎\ncamelCase has a capital letter in the front or front and middle forming the camel’s hump(s), there are multiple naming conventions, it doesn’t matter which you pick, just stick to one of them.↩︎\nR was created to allow for vector programming, that is a programming language where you can apply operations to entire sets of values (vectors) at the same time, rather than having to cycle through them individually. Vector languages work in a way that is close to how mathematical notation works, making them well suited for performing mathematical functions.↩︎\nYou’ll sometimes see the words package and library used interchangeably, technically the library is the place where the packages are stored.↩︎",
    "crumbs": [
      "Sessions",
      "02 Introduction to R",
      "Introduction to R"
    ]
  }
]